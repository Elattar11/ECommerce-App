"use strict";(self.webpackChunkEcommerceApp=self.webpackChunkEcommerceApp||[]).push([[939],{939:(b,p,a)=>{a.r(p),a.d(p,{ForgetpasswordComponent:()=>N});var m=a(6814),r=a(95),e=a(4769),c=a(9862);let l=(()=>{class o{constructor(t){this._HttpClient=t,this.baseURL="https://ecommerce.routemisr.com"}forgetPassword(t){return this._HttpClient.post(this.baseURL+"/api/v1/auth/forgotPasswords",t)}resetCode(t){return this._HttpClient.post(this.baseURL+"/api/v1/auth/verifyResetCode",t)}resetPassword(t){return this._HttpClient.put(this.baseURL+"/api/v1/auth/resetPassword",t)}static#e=this.\u0275fac=function(s){return new(s||o)(e.LFG(c.eN))};static#t=this.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var u=a(1120),d=a(2425);function _(o,i){1&o&&(e.TgZ(0,"p",11),e._uU(1,"Email is Required"),e.qZA())}function g(o,i){1&o&&(e.TgZ(0,"p",11),e._uU(1,"Invalid Email Address"),e.qZA())}function f(o,i){if(1&o&&(e.TgZ(0,"div",9),e.YNc(1,_,2,0,"p",10),e.YNc(2,g,2,0,"p",10),e.qZA()),2&o){const t=e.oxw(2);let s,n;e.xp6(1),e.Q6J("ngIf",null==(s=t.forgetForm.get("email"))?null:s.getError("required")),e.xp6(1),e.Q6J("ngIf",null==(n=t.forgetForm.get("email"))?null:n.getError("email"))}}function w(o,i){if(1&o&&(e.TgZ(0,"p",12),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Oqu(t.userMsg)}}function x(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"section",2)(1,"form",3),e.NdJ("ngSubmit",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.forgetPassword())}),e.TgZ(2,"label",4),e._uU(3,"Email"),e.qZA(),e._UZ(4,"input",5),e.YNc(5,f,3,2,"div",6),e.TgZ(6,"button",7),e._uU(7,"Forget Password"),e.qZA(),e.YNc(8,w,2,1,"p",8),e.qZA()()}if(2&o){const t=e.oxw();let s;e.xp6(1),e.Q6J("formGroup",t.forgetForm),e.xp6(4),e.Q6J("ngIf",(null==(s=t.forgetForm.get("email"))?null:s.errors)&&(null==(s=t.forgetForm.get("email"))?null:s.touched)),e.xp6(3),e.Q6J("ngIf",t.userMsg)}}function h(o,i){1&o&&(e.TgZ(0,"p",11),e._uU(1,"OTP is Required"),e.qZA())}function C(o,i){if(1&o&&(e.TgZ(0,"div",9),e.YNc(1,h,2,0,"p",10),e.qZA()),2&o){const t=e.oxw(2);let s;e.xp6(1),e.Q6J("ngIf",null==(s=t.resetCodeForm.get("resetCode"))?null:s.getError("required"))}}function F(o,i){if(1&o&&(e.TgZ(0,"p",12),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Oqu(t.userMsg)}}function Z(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"section",13)(1,"form",3),e.NdJ("ngSubmit",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.resetCode())}),e.TgZ(2,"label",14),e._uU(3,"Reset Code"),e.qZA(),e._UZ(4,"input",15),e.YNc(5,C,2,1,"div",6),e.TgZ(6,"button",7),e._uU(7,"Reset Code"),e.qZA(),e.YNc(8,F,2,1,"p",8),e.qZA()()}if(2&o){const t=e.oxw();let s;e.xp6(1),e.Q6J("formGroup",t.resetCodeForm),e.xp6(4),e.Q6J("ngIf",(null==(s=t.resetCodeForm.get("resetCode"))?null:s.errors)&&(null==(s=t.resetCodeForm.get("resetCode"))?null:s.touched)),e.xp6(3),e.Q6J("ngIf",t.userMsg)}}function T(o,i){1&o&&(e.TgZ(0,"p",11),e._uU(1,"password is Required"),e.qZA())}function v(o,i){1&o&&(e.TgZ(0,"p",11),e._uU(1,"Password must be at least 6 chars"),e.qZA())}function I(o,i){if(1&o&&(e.TgZ(0,"div",9),e.YNc(1,T,2,0,"p",10),e.YNc(2,v,2,0,"p",10),e.qZA()),2&o){const t=e.oxw(2);let s,n;e.xp6(1),e.Q6J("ngIf",null==(s=t.resetPasswordForm.get("newPassword"))?null:s.getError("required")),e.xp6(1),e.Q6J("ngIf",null==(n=t.resetPasswordForm.get("newPassword"))?null:n.getError("pattern"))}}function P(o,i){if(1&o&&(e.TgZ(0,"p",12),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Oqu(t.userMsg)}}function q(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"section",13)(1,"form",3),e.NdJ("ngSubmit",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.newPassword())}),e.TgZ(2,"label",16),e._uU(3,"New Password"),e.qZA(),e._UZ(4,"input",17),e.YNc(5,I,3,2,"div",6),e.TgZ(6,"button",7),e._uU(7,"Confirm"),e.qZA(),e.YNc(8,P,2,1,"p",8),e.qZA()()}if(2&o){const t=e.oxw();let s;e.xp6(1),e.Q6J("formGroup",t.resetPasswordForm),e.xp6(4),e.Q6J("ngIf",(null==(s=t.resetPasswordForm.get("newPassword"))?null:s.errors)&&(null==(s=t.resetPasswordForm.get("newPassword"))?null:s.touched)),e.xp6(3),e.Q6J("ngIf",t.userMsg)}}let N=(()=>{class o{constructor(t,s,n){this._ForgetpassService=t,this._Router=s,this._ToastrService=n,this.step1=!0,this.step2=!1,this.step3=!1,this.email="",this.userMsg="",this.forgetForm=new r.cw({email:new r.NI("",[r.kI.required,r.kI.email])}),this.resetCodeForm=new r.cw({resetCode:new r.NI("",[r.kI.required])}),this.resetPasswordForm=new r.cw({newPassword:new r.NI("",[r.kI.required,r.kI.pattern(/^[a-zA-Z0-9_@]{6,}$/)])})}forgetPassword(){let t=this.forgetForm.value;this.email=t.email,this._ForgetpassService.forgetPassword(t).subscribe({next:s=>{this.userMsg=s.message,this.step1=!1,this.step2=!0},error:s=>{this.userMsg=s.error.message}})}resetCode(){this._ForgetpassService.resetCode(this.resetCodeForm.value).subscribe({next:s=>{this.userMsg=s.status,this.step2=!1,this.step3=!0},error:s=>{this.userMsg=s.error.message}})}newPassword(){let t=this.resetPasswordForm.value;t.email=this.email,this._ForgetpassService.resetPassword(t).subscribe({next:s=>{s.token&&(localStorage.setItem("userToken",s.token),this._Router.navigate(["/login"]),this._ToastrService.success("Your password reseted successfully"))},error:s=>{this.userMsg=s.error.message}})}static#e=this.\u0275fac=function(s){return new(s||o)(e.Y36(l),e.Y36(u.F0),e.Y36(d._W))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-forgetpassword"]],standalone:!0,features:[e.jDz],decls:3,vars:3,consts:[["class","w-50 mx-auto rounded p-3 shadow mt-5",4,"ngIf"],["class","w-50 mx-auto rounded p-3 shadow",4,"ngIf"],[1,"w-50","mx-auto","rounded","p-3","shadow","mt-5"],[3,"formGroup","ngSubmit"],["for","email"],["formControlName","email","type","email","id","email",1,"form-control"],["class","alert alert-danger p-1 small w-50 mx-auto mt-1",4,"ngIf"],[1,"main-btn","w-100","mt-3"],["class","alert alert-danger w-75 p-1 mx-auto mb-0 mt-2 text-center",4,"ngIf"],[1,"alert","alert-danger","p-1","small","w-50","mx-auto","mt-1"],["class","mb-0 text-center",4,"ngIf"],[1,"mb-0","text-center"],[1,"alert","alert-danger","w-75","p-1","mx-auto","mb-0","mt-2","text-center"],[1,"w-50","mx-auto","rounded","p-3","shadow"],["for","resetCode"],["formControlName","resetCode","type","text","id","resetCode",1,"form-control"],["for","newPassword"],["formControlName","newPassword","type","password","id","newPassword",1,"form-control"]],template:function(s,n){1&s&&(e.YNc(0,x,9,3,"section",0),e.YNc(1,Z,9,3,"section",1),e.YNc(2,q,9,3,"section",1)),2&s&&(e.Q6J("ngIf",n.step1),e.xp6(1),e.Q6J("ngIf",n.step2),e.xp6(1),e.Q6J("ngIf",n.step3))},dependencies:[m.ez,m.O5,r.UX,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u]})}return o})()}}]);